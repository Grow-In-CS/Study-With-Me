# JWT
JWT는 로그인 후 서버가 토큰을 발급하고, 클라이언트는 이 토큰을 헤더에 담아 요청을 보내는 구조다.

이 방식은 세션을 서버에 저장하지 않아도 되기 때문에 확장성(Scalability) 과 무상태성(Stateless) 측면에서 큰 장점이 있다.

JWT (JSON Web Token) 는
JSON 형식으로 데이터를 담고, 전자 서명을 이용해 위조 여부를 검증할 수 있는 토큰 기반 인증 방식이다.

# JWT 구조
```text
xxxxx.yyyyy.zzzzz
```
| 구분 | 이름        | 설명                      |
|----| --------- | ----------------------- |
| 앞  | Header    | 어떤 알고리즘과 토큰 타입을 사용할지 명시 |
| 중간 | Payload   | 사용자 정보(Claim) 저장        |
| 뒤  | Signature | 위변조 방지를 위한 서명           |

## Header
```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```
- alg: 서명 알고리즘 (예: HS256, RS256)
- typ: 토큰 타입 (JWT)

이를 Base64URL로 인코딩하면 JWT의 첫 번째 부분

## Payload
```json
{
  "sub": "1234567890",
  "name": "홍길동",
  "role": "USER",
  "exp": 1736354400
}
```
여기에 담긴 정보들을 Claim(클레임) 이라고 부른다.

- Registered Claim: 표준으로 정의된 키 (iss, sub, exp, aud, iat 등)
- Public Claim: 공개적으로 사용하는 키 (role, email 등)
- Private Claim: 서비스 내부에서 정의한 커스텀 키

이 부분 역시 Base64URL 인코딩

## Signature
```text
HMACSHA256(
    base64UrlEncode(header) + "." + base64UrlEncode(payload),
    secretKey
)
```
서버는 비밀키(secretKey) 로 서명한다. 클라이언트가 받은 JWT를 서버로 다시 보냈을 때, 서버는 이 서명을 검증하여 토큰이 위조되지 않았는지 확인한다.

# 세션 기반과의 차이점
| 구분              | 세션(Session)       | JWT                |
| --------------- | ----------------- | ------------------ |
| **인증 정보 저장 위치** | 서버 (메모리/DB)       | 클라이언트 (토큰 자체에 포함)  |
| **확장성**         | 서버가 늘어나면 세션 공유 필요 | 서버 간 공유 불필요        |
| **보안성**         | 서버에서 관리 가능        | 탈취 시 위험 (서명 검증 필수) |
| **로그아웃 처리**     | 세션 삭제             | 토큰 블랙리스트 필요        |

JWT는 무상태(stateless) 이므로 서버 확장에 유리하지만,
토큰이 유효 기간 동안은 별도 조치 없이는 무효화하기 어렵다는 단점이 있다.

# JWT 장단점
| 장점                     | 단점                    |
| ---------------------- | --------------------- |
| 서버에 세션 저장 불필요 → 확장성 좋음 | 토큰 탈취 시 만료 전까지 악용 가능  |
| 분산 서버 환경에서 인증 일관성 유지   | 로그아웃/강제 만료 처리가 복잡     |
| 클라이언트-서버 간 인증 단순화      | 토큰 크기가 커지면 네트워크 부하 증가 |
