
# 🌐 웹 통신 흐름도 (Web Communication Flow)

웹 브라우저가 서버와 데이터를 주고받을 때 어떤 과정이 일어나는지 단계별로 정리한 문서입니다.

---

# 1. 전체 흐름 요약 (요청 → 처리 → 응답)

```
[Client: Browser]
      │  HTTP Request
      ▼
[Web Server (Nginx/Apache)]
      │  Reverse Proxy / Routing
      ▼
[Application Server (Spring, Node.js, Django)]
      │  Business Logic
      ▼
[Database (MySQL, Redis, MongoDB)]
      │  Query/Fetch
      ▼
[Application Server]
      │  Build Response
      ▼
[Web Server]
      │  Return HTTP Response
      ▼
[Client Browser Rendering]
```

---

# 2. 단계별 설명

## 2.1 브라우저 요청 (Client Request)

사용자가 URL 입력 또는 버튼 클릭 → 브라우저가 서버로 **HTTP 요청** 전송  
요청 구성 요소:
- URL
- HTTP Method (GET, POST, PUT, DELETE)
- Header (Cookie, User-Agent, Content-Type)
- Body (POST/PUT 시 데이터)

---

## 2.2 DNS 조회 (Domain → IP 변환)

브라우저는 먼저 **DNS 서버에 도메인의 IP 주소를 요청**한다.

```
www.example.com → 142.251.42.164
```

DNS 조회 단계:
1. 로컬 캐시 확인
2. OS 캐시 확인
3. 네임서버 재귀 조회
4. 최종 IP 반환

---

## 2.3 TCP 연결 (3-Way Handshake)

HTTP 요청을 보내기 전  
브라우저 ↔ 서버 간에 TCP 연결 생성

```
Client: SYN →
Server: SYN + ACK →
Client: ACK →
```

연결이 성립되면 이후 HTTP 데이터 전송 가능.

---

## 2.4 TLS 핸드셰이크 (HTTPS일 경우)

HTTPS라면 암호화를 위해 TLS 인증 과정 진행:

- 인증서 교환
- 공개키 기반 암호화 키 생성
- 암호화 채널 생성

완료 후 안전한 데이터 전송 가능.

---

## 2.5 웹 서버(Web Server) 처리

예: **Nginx, Apache**

웹 서버 역할:
- 정적 파일(css/js/img) 바로 제공
- Application Server로 요청 전달 (Reverse Proxy)
- 로드 밸런싱
- 캐싱

```
브라우저 → Nginx → Spring 서버 전달
```

---

## 2.6 애플리케이션 서버(Application Server)

예: **Spring Boot, Node.js, Django, Ruby on Rails**

주 역할:
- 인증/인가 처리
- 비즈니스 로직 수행
- 데이터베이스 조회/저장
- 외부 API 통신
- Response 데이터 구성

```
Nginx → Spring Controller → Service → Repository → DB
```

---

# 2.7 데이터베이스(DB) 처리

종류에 따라 처리 방식이 다름:
- MySQL / PostgreSQL → RDBMS
- Redis → 캐싱, 세션 저장
- Elasticsearch → 검색 엔진
- MongoDB → NoSQL 문서 저장

DB 서버는 쿼리를 처리하고 Application Server에 결과 반환.

---

# 2.8 서버가 응답 생성(Response)

서버는 처리 결과를 기반으로 응답을 생성:
- HTTP Status Code (200, 404, 500…)
- Header (Set-Cookie 등)
- Body (HTML, JSON, 파일 등)

---

# 2.9 브라우저 렌더링 과정

응답을 받은 브라우저는 화면 표시를 위해 다음 단계를 수행:

### ✔ HTML 파싱
DOM(Document Object Model) 생성

### ✔ CSS 파싱
CSSOM 생성

### ✔ JavaScript 실행
JS 엔진(V8 등)이 실행하며 DOM/CSSOM 조작 가능

### ✔ Layout & Painting
최종 UI를 계산하고 화면에 그림

---

# 3. 전체 플로우 도식화

```
[User]
   │
   ▼
[Browser]
   │ HTTP(S) Request
   ▼
[DNS Server]  →  IP 조회
   │
   ▼
[Web Server (Nginx)]
   │  Routing / Reverse Proxy
   ▼
[Application Server (Spring/Node.js)]
   │  Business Logic
   ▼
[Database (MySQL/Redis/Mongo)]
   │  Query
   ▼
[Application Server]
   │  Response Build
   ▼
[Web Server]
   │ HTTP Response
   ▼
[Browser Rendering]
   ▼
[User Screen Output]
```

---

# 4. 요약

- 브라우저 → 서버로 HTTP 요청 전송
- DNS 조회로 IP 확인
- HTTPS면 TLS Handshake
- 웹 서버(Nginx)에서 라우팅
- 애플리케이션 서버(Sprint/Node)에서 로직 처리
- DB 조회 후 Response 생성
- 브라우저는 HTML/CSS/JS 렌더링

**이 전체 흐름이 웹이 동작하는 기본 프로세스이다.**

